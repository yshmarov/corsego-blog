---
layout: post
title: 'Ruby on Rails: Heroku: Creates, downloads, and loads your Heroku db to your
  dev db'
date: '2020-11-09T22:50:00.001+01:00'
author: yaro_the_slav
tags: 
modified_time: '2020-11-09T22:50:14.962+01:00'
blogger_id: tag:blogger.com,1999:blog-5936476238571675194.post-6436569582789071726
---

Sometimes you want to run a copy of your production database in development.&nbsp;<br />It can be really useful for debugging, or experimenting with potentially dangerous operations.<br /><p>Here's how you can run your Heroku Postgresql database in development in an Ubuntu environment:</p><p>local development database name in database.yml:</p><p><br /></p><p><br /></p><p>&nbsp;</p><pre class="rounded text-xs highlight lang-ruby hljs"><code><pre class="rounded text-xs highlight lang-ruby hljs"><code>rails db:drop</code></pre>rails db:drop DISABLE_DATABASE_ENVIRONMENT_CHECK=1</code></pre><pre class="rounded text-xs highlight lang-ruby hljs"><code>rails db:create</code></pre><pre class="rounded text-xs highlight lang-ruby hljs"><code>rails db:migrate</code></pre><pre class="rounded text-xs highlight lang-ruby hljs"><code>heroku pg:backups:capture --app myappname</code></pre><pre class="rounded text-xs highlight lang-ruby hljs"><code>heroku pg:backups:download --app myappname</code></pre><pre class="rounded text-xs highlight lang-ruby hljs"><code>pg_restore -h localhost -d <span class="hljs-subst">myappname_development</span> latest.dump</code></pre><pre class="rounded text-xs highlight lang-ruby hljs"><code>rm latest.dump </code></pre><pre class="rounded text-xs highlight lang-ruby hljs"><br /></pre><pre class="rounded text-xs highlight lang-ruby hljs">set<span style="color: var(--highlight-color); font-family: inherit; font-size: 13px; font-style: inherit; font-variant-caps: inherit; font-variant-ligatures: inherit; font-weight: inherit; white-space: inherit;"> </span><span class="hljs-string" style="border: 0px; box-sizing: inherit; color: var(--highlight-variable); font-family: inherit; font-size: 13px; font-stretch: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; line-height: inherit; margin: 0px; padding: 0px; vertical-align: baseline; white-space: inherit;">"PGPASSWORD=123"</span></pre><pre class="rounded text-xs highlight lang-ruby hljs">pg_restore -h localhost -U username -d myappname_development latest.dump</pre><div><pre class="rounded text-xs highlight lang-ruby hljs">pg_restore --verbose --clean --no-acl --no-owner -h localhost -U username -d myappname_development latest.dump</pre><div><br /></div></div><pre class="rounded text-xs highlight lang-ruby hljs"><code><br /></code></pre><pre class="rounded text-xs highlight lang-ruby hljs">As well we provide "<b>myappname_development</b>" - the name from your development database in&nbsp;<b>database.yml</b>.</pre><p><span style="background-color: #fcff01;">That's it! Now you have a copy of your production database running in developmentðŸ¥³!</span></p><h3>4. Useful links:</h3><p><a href="https://devcenter.heroku.com/articles/heroku-postgres-backups" target="_blank">Heroku backups info</a></p>