---
layout: post
title: "Get Youtube video thumbnail image"
tags: oembed
---

### Paste Youtube, Vimeo or Wistia video url to get the thumbnail image and oembed data

<div id="video-preview-container">
  <div>
    <input 
      type="text" 
      value="https://www.youtube.com/watch?v=TcGXLorlXwQ"
      class="video-input" 
      placeholder="Enter video URL (YouTube, Vimeo, or Wistia)"
    >
    <button onclick="videoPreview.fetchThumbnail()">
      Get oEmbed
    </button>
  </div>
  <div class="video-thumbnail-output"></div>
  <br>
  <pre class="video-data-output"></pre>
</div>

### How it works

I often google "get youtube video thumbnail".

[Oembed](https://oembed.com/) let's you get metadata and embed code for a media asset.

If a web page has `<link rel="alternate" type="application/json+oembed" href="...">`, it means that the page supports oembed. The href is the oembed url. The first part of the url is the oembed API endpoint.

For example

```html
<link rel="alternate" type="application/json+oembed" href="https://www.youtube.com/oembed?format=json&url=https://www.youtube.com/watch?v=vS-F1PlLyTk" title="Typesense search with Ruby on Rails #225">
```

means that the **Youtube** API endpoint is

```
https://www.youtube.com/oembed?format=json&url=
```

**Vimeo**

```
https://vimeo.com/api/oembed.json?url=
```

**Wistia**

```
https://fast.wistia.com/oembed?url=
```

At the end of the API endpoint append the url to the video to get the oembed data.

<script>
class VideoThumbnailPreview {
  constructor(container) {
    this.container = container;
    this.input = container.querySelector('.video-input');
    this.thumbnailOutput = container.querySelector('.video-thumbnail-output');
    this.dataOutput = container.querySelector('.video-data-output');
    
    // Bind event listeners
    this.input.addEventListener('input', () => this.fetchThumbnail());
    
    // Initial fetch if there's a value
    this.fetchThumbnail();
  }

  async fetchThumbnail() {
    const url = this.input.value;
    if (!url) {
      this.clearOutput();
      return;
    }

    const videoProvider = this.detectVideoProvider(url);
    if (!videoProvider) {
      this.clearOutput();
      return;
    }

    try {
      const data = await this.fetchOembedData(url, videoProvider);
      if (data) {
        this.thumbnailOutput.innerHTML = `<img src="${data.thumbnail_url}" alt="Video thumbnail">`;
        this.dataOutput.textContent = JSON.stringify(data, null, 2);
      } else {
        this.clearOutput();
      }
    } catch (error) {
      this.clearOutput();
    }
  }

  clearOutput() {
    this.thumbnailOutput.innerHTML = '';
    this.dataOutput.innerHTML = '';
  }

  detectVideoProvider(url) {
    if (url.match(/youtu/)) return 'youtube';
    if (url.match(/vimeo/)) return 'vimeo';
    if (url.match(/wistia/)) return 'wistia';
    return null;
  }

  async fetchOembedData(url, provider) {
    const endpoints = {
      youtube: `https://www.youtube.com/oembed?url=${encodeURIComponent(url)}&format=json`,
      vimeo: `https://vimeo.com/api/oembed.json?url=${encodeURIComponent(url)}`,
      wistia: `https://fast.wistia.com/oembed?url=${encodeURIComponent(url)}&format=json`
    };

    const endpoint = endpoints[provider];
    if (!endpoint) return null;

    const response = await fetch(endpoint);
    if (!response.ok) return null;

    const data = await response.json();
    return data;
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const container = document.querySelector('#video-preview-container');
  window.videoPreview = new VideoThumbnailPreview(container);
});
</script>
